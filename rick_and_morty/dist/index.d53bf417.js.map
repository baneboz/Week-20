{"mappings":"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","sources":["src/js/config.js","src/js/helpers.js","src/js/model.js","src/js/views/View.js","src/js/views/charactersView.js","src/js/views/paginationView.js","src/js/views/goToView.js","src/js/views/modalView.js","src/js/controller.js"],"sourcesContent":["export const API_URL = \"https://rickandmortyapi.com/api/character/?page=1\";\r\nexport const API_URL_SINGLE = \"https://rickandmortyapi.com/api/character/\";\r\nexport const TIMEOUT_SEC = 7;\r\n","import { TIMEOUT_SEC, API_URL } from \"./config.js\";\r\n\r\nconst timeout = function (s) {\r\n  return new Promise(function (_, reject) {\r\n    setTimeout(function () {\r\n      reject(new Error(`Request took too long! Timeout after ${s} second`));\r\n    }, s * 1000);\r\n  });\r\n};\r\n\r\nexport const getJSON = async function (url = API_URL) {\r\n  try {\r\n    const res = await Promise.race([fetch(url), timeout(TIMEOUT_SEC)]);\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(`${data.message} (${res.status}) ðŸ’£ðŸ’£ðŸ’£ `);\r\n\r\n    return data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n","// import { API_URL, START_PAGE } from \"./config.js\";\r\nimport { getJSON } from \"./helpers.js\";\r\nimport { API_URL_SINGLE } from \"./config.js\";\r\n\r\nexport const state = {\r\n  characters: [],\r\n  info: {},\r\n  singleCharacter: {},\r\n};\r\n\r\nexport const loadCharacters = async function (url) {\r\n  try {\r\n    const data = await getJSON(url);\r\n\r\n    state.characters = data.results;\r\n    state.info.pagesNum = data.info.pages;\r\n    state.info.prevPage = data.info.prev;\r\n    state.info.nextPage = data.info.next;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const loadSingleCharacter = async function (char) {\r\n  try {\r\n    const data = await getJSON(API_URL_SINGLE + char);\r\n\r\n    state.singleCharacter = data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n","export default class View {\r\n  _data;\r\n\r\n  _clear() {\r\n    this._containerEl.innerHTML = \"\";\r\n  }\r\n\r\n  render(data) {\r\n    this._data = data;\r\n    const markup = this._generateMarkup();\r\n    this._clear();\r\n    this._containerEl.insertAdjacentHTML(\"beforeend\", markup);\r\n  }\r\n\r\n  renderSpin() {\r\n    const markup = `<div class=\"lds-hourglass\"></div>`;\r\n    this._clear();\r\n    this._containerEl.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n\r\n  renderErr() {}\r\n}\r\n","import View from \"./View.js\";\r\n\r\nclass CharactersView extends View {\r\n  _containerEl = document.querySelector(\".cards__container\");\r\n\r\n  _generateMarkup() {\r\n    return this._data.characters.map(this._generateMarkupCards).join(\"\");\r\n  }\r\n\r\n  _generateMarkupCards(card) {\r\n    return `\r\n      <figure class=\"card\" data-id=\"${card.id}\">\r\n        <img\r\n          src=\"${card.image}\"\r\n          alt=\"${card.name} Icon\"\r\n          class=\"card__image\"\r\n        />\r\n        <figcaption class=\"card__caption\">\r\n          <h3 class=\"card__name\">${card.name}</h3>\r\n          <svg class=\"like__btn\" data-name=\"like__btn\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 122.88 122.88\">\r\n          <path class=\"like__btn--1\" d=\"M61.44,0A61.44,61.44,0,1,1,0,61.44,61.44,61.44,0,0,1,61.44,0Z\"/>\r\n          <path class=\"like__btn--2\" d=\"M32.5,53.39H43.06a2.18,2.18,0,0,1,2.17,2.18V84.52a2.19,2.19,0,0,1-2.17,2.18H32.5a2.19,2.19,0,0,1-2.18-2.18V55.57a2.19,2.19,0,0,1,2.18-2.18ZM60.2,\r\n          31.68c1.14-5.82,10.66-.46,11.29,8.91a40.41,40.41,0,0,1-.81,9.93H84.29c5.65.23,10.59,4.28,7.1,10.93.8,2.9.92,6.3-1.24,7.65.27,4.57-1,7.41-3.37,9.65A11.42,\r\n          11.42,0,0,1,85,84.63c-1.83,2.58-3.31,2-6.19,2h-23c-3.64,0-5.62-1-8-4V57C54.72,55.17,58.36,45.8,60.2,39.65v-8Z\"/></svg>\r\n        </figcaption>\r\n      </figure>\r\n    `;\r\n  }\r\n}\r\nexport const charactersView = new CharactersView();\r\n","import View from \"./View.js\";\r\n\r\nclass PaginationView extends View {\r\n  _containerEl = document.querySelector(\".pagination__list\");\r\n\r\n  addHandlerClick(handler) {\r\n    this._containerEl.addEventListener(\"click\", function (e) {\r\n      // e.preventDefault();\r\n      const btn = e.target.closest(\".pagination__link\");\r\n\r\n      if (!btn) return;\r\n\r\n      const goTo = btn.dataset.goto;\r\n\r\n      handler(goTo);\r\n    });\r\n  }\r\n\r\n  _generateMarkup() {\r\n    const info = this._data.info;\r\n    const currentPage = info.nextPage\r\n      ? info.nextPage.slice(48) - 1\r\n      : info.pagesNum;\r\n\r\n    if (!info.prevPage) {\r\n      return `\r\n      <li class=\"pagination__item pagination__link pagination__link--prev disabled\" data-goto=\"prevPage\">\r\n        <a href=\"#\">&lt; Prev</a>\r\n      </li>\r\n      <li class=\"pagination__item\"><p>${currentPage} / ${info.pagesNum}</p></li>\r\n      <li class=\"pagination__item pagination__link pagination__link--next\"  data-goto=\"nextPage\">\r\n        <a href=\"#\">Next &gt;</a\r\n        >\r\n      </li>\r\n    `;\r\n    }\r\n\r\n    if (!info.nextPage) {\r\n      return `\r\n      <li class=\"pagination__item pagination__link pagination__link--prev\" data-goto=\"prevPage\">\r\n        <a href=\"#\">&lt; Prev</a>\r\n      </li>\r\n      <li class=\"pagination__item\"><p>${currentPage} / ${info.pagesNum}</p></li>\r\n      <li class=\"pagination__item pagination__link pagination__link--next disabled\"  data-goto=\"nextPage\">\r\n        <a href=\"#\">Next &gt;</a\r\n        >\r\n      </li>\r\n    `;\r\n    }\r\n\r\n    return `\r\n      <li class=\"pagination__item pagination__link pagination__link--prev\" data-goto=\"prevPage\">\r\n        <a href=\"#\">&lt; Prev</a>\r\n      </li>\r\n      <li class=\"pagination__item\"><p>${currentPage} / ${info.pagesNum}</p></li>\r\n      <li class=\"pagination__item pagination__link pagination__link--next\"  data-goto=\"nextPage\">\r\n        <a href=\"#\">Next &gt;</a\r\n        >\r\n      </li>\r\n    `;\r\n  }\r\n}\r\nexport const paginationView = new PaginationView();\r\n","import View from \"./View.js\";\r\n\r\nclass GoToView extends View {\r\n  _containerEl = document.querySelector(\".pagination__go\");\r\n  _btn = this._containerEl.querySelector(\".pagination__btn--go\");\r\n\r\n  addHandlerClick(handler) {\r\n    let page = this._containerEl.querySelector(\"#pagination__num\");\r\n\r\n    this._btn.addEventListener(\"click\", function (e) {\r\n      e.preventDefault();\r\n      const pageGoTo = page.value;\r\n\r\n      if (!pageGoTo) return;\r\n      if (pageGoTo < 1 || pageGoTo > 42) {\r\n        alert(\"Number of page must be between 1 and 42\");\r\n        return;\r\n      }\r\n\r\n      handler(pageGoTo);\r\n\r\n      // clear input field\r\n      page.value = \"\";\r\n    });\r\n  }\r\n}\r\nexport const goToView = new GoToView();\r\n","import View from \"./View.js\";\r\n\r\nclass ModalView extends View {\r\n  _containerEl = document.querySelector(\".modal\");\r\n  _modalTargetContainer = document.querySelector(\".cards__container\");\r\n  _overlay = document.querySelector(\".overlay\");\r\n\r\n  addHandlerClick(handler) {\r\n    const modal = this._containerEl;\r\n    const overlay = this._overlay;\r\n    const closeBtn = this._closeBtn;\r\n\r\n    this._modalTargetContainer.addEventListener(\"click\", function (e) {\r\n      const modalTarget = e.target.closest(\".card\");\r\n      if (!modalTarget) return;\r\n\r\n      handler(modalTarget.dataset.id);\r\n\r\n      modal.classList.remove(\"hidden\");\r\n      overlay.classList.remove(\"hidden\");\r\n    });\r\n\r\n    overlay.addEventListener(\"click\", function (e) {\r\n      modal.classList.add(\"hidden\");\r\n      overlay.classList.add(\"hidden\");\r\n    });\r\n  }\r\n\r\n  _generateMarkup() {\r\n    const char = this._data.singleCharacter;\r\n    console.log(char);\r\n    return `\r\n      <div class=\"modal__inner\">\r\n\r\n        <div class=\"modal__heading\">\r\n          <img src=\"${char.image}\" alt=\"${char.name}\" />\r\n        </div>\r\n\r\n        <div class=\"modal__content\">\r\n          <h3>${char.name}</h3>\r\n          <p>${char.status} | ${char.species} | ${char.gender}</p>\r\n          <p>\r\n            <span class=\"\">Place of Origin:</span>\r\n            <br /> \r\n            ${char.origin.name}\r\n          </p>\r\n          <p>\r\n            <span class=\"\">\r\n              Last know Location: \r\n            </span>\r\n            <br />\r\n            ${char.location.name}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n\r\nexport const modalView = new ModalView();\r\n","import * as model from \"./model.js\";\r\nimport { API_URL, API_URL_SINGLE } from \"./config.js\";\r\nimport { charactersView } from \"./views/charactersView.js\";\r\nimport { paginationView } from \"./views/paginationView.js\";\r\nimport { goToView } from \"./views/goToView.js\";\r\nimport { modalView } from \"./views/modalView.js\";\r\n\r\nconst controlCharacters = async function (url) {\r\n  // render spiner\r\n  charactersView.renderSpin();\r\n\r\n  try {\r\n    // get (load) chars\r\n    await model.loadCharacters(url);\r\n\r\n    // render characters\r\n    charactersView.render(model.state);\r\n\r\n    // render pagination\r\n    paginationView.render(model.state);\r\n  } catch (err) {\r\n    // temp error handling - NEED RENDER\r\n    console.log(err.message);\r\n  }\r\n};\r\n\r\nconst controlPagination = function (goTo) {\r\n  const link = model.state.info[goTo];\r\n  controlCharacters(link);\r\n};\r\nconst controlGoTo = function (goTo) {\r\n  const link = API_URL.slice(0, 48) + goTo;\r\n  controlCharacters(link);\r\n};\r\n\r\nconst controlSingleCharacter = async function (char) {\r\n  try {\r\n    // get single char\r\n    await model.loadSingleCharacter(char);\r\n\r\n    // render in modal\r\n    modalView.render(model.state);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst init = function () {\r\n  controlCharacters();\r\n  paginationView.addHandlerClick(controlPagination);\r\n  goToView.addHandlerClick(controlGoTo);\r\n  modalView.addHandlerClick(controlSingleCharacter);\r\n};\r\n\r\ninit();\r\n"],"names":["$ba30e20475feac5a$export$923ea8233b386e99","$bd02c871d9c5ba8e$export$d047a7c56db64af4","async","url","res","Promise","race","fetch","s","_","reject","setTimeout","Error","data","json","ok","message","status","err","$0f1d4402dffacf5b$export$ca000e230c0caa3e","characters","info","singleCharacter","$3a07c34e115c11c9$export$2e2bcd8739ae039","_data","_clear","this","_containerEl","innerHTML","render","markup","_generateMarkup","insertAdjacentHTML","renderSpin","renderErr","$96f4098d1486ae3f$export$5ccb37f5f4f00b30","document","querySelector","map","_generateMarkupCards","join","card","id","image","name","$cfa940594ee109f7$export$13bc880e24b6e7d1","addHandlerClick","handler","addEventListener","e","btn","target","closest","goTo","dataset","goto","currentPage","nextPage","slice","pagesNum","prevPage","$70f61005026d846a$export$cc43ef3ca2ae36e8","_btn","page","preventDefault","pageGoTo","value","alert","$bcf5b9f62c105673$export$abd8ce60614c97e5","_modalTargetContainer","_overlay","modal","overlay","_closeBtn","modalTarget","classList","remove","add","char","console","log","species","gender","origin","location","$f50bd1f2915ed0f2$var$controlCharacters","results","pages","prev","next","$0f1d4402dffacf5b$export$9abc01986d6aae1d","$f50bd1f2915ed0f2$var$controlPagination","link","$f50bd1f2915ed0f2$var$controlGoTo","$f50bd1f2915ed0f2$var$controlSingleCharacter","$0f1d4402dffacf5b$export$99e6e65d5cbc21ab"],"version":3,"file":"index.d53bf417.js.map"}